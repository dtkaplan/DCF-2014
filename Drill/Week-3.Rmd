
```{r include=FALSE}
require(mosaic)
require(dplyr)
require(ggplot2)
require(tidyr)
require(ScoreR)
require(DCF)
require(xtable)
options( xtable.type="html", xtable.include.rownames=FALSE )
startProblem("DCF-Assignment3")
```

<!--- Control the display of answers -->
<style>
  aside.answer {color:white; background-color:blue; display:none;}
</style>


## Week 3 Drill

### Don't Peek!

Here are the first letters of the names of several data verbs. (Repeated letters are for different verbs.) Complete the name and say briefly what the verb does.

Rather than looking at a list of verbs, do this just from memory.  

* A
* G
* J
* M
* F
* S
* S



## Data verbs and their uses

Each of these tasks can be performed using a single data verb.  For each task, say which verb it is:

* Find the average of one of the variables.

<aside class="answer">
`summarise()`
</aside>

* Add a new column that is the ratio between two variables.

<aside class="answer">
`mutate()`
</aside>

* Sort the cases in descending order of a variable.

<aside class="answer">
`arrange()`
</aside>

* Create a new data table that includes only those cases that meet a criterion.

<aside class="answer">
`filter()`
</aside>

* From a data table with three categorical variables A, B, & C, and a quantitative variable X, produce an output that has a separate case for each of the combinations of the levels of A and B.  (Hint: It might be easier to see the answer if the problem statement added, "and gives the maximum value of X over all the cases that have a given combination of A and B." )

<aside class="answer">
`filter()`
</aside>

* From a data table with three categorical variables A, B, & C, and a quantitative variable X, produce an output that has the same cases but only the variables A and X.

## Two steps

These questions refer to the `diamonds` data table.  Take a look at the codebook (using `help()`) so that you'll understand the meaning of the tasks.^[Motivated by [this problem set](http://www.public.iastate.edu/~hofmann/stat480/homework/dplyr%20drills.html) based on drills by Garrett Grolemund which are licensed under the [CC Attribution-Noncommercial-Share Alike 3.0 License](http://creativecommons.org/licenses/by-nc-sa/3.0/us/).]

Each of the following tasks can be accomplished by a statement of the form
```{r eval=FALSE}
diamonds %>% 
  verb1( args1 ) %>% 
  verb2( args2 ) %>% 
  arrange( args3 ) %>% head( 1 )
```

Identify the verbs and arguments.

1. Which color diamonds seem to be largest on average (in terms of carats)?
    * verb1: 
    * verb2:
    * args1:
    * args2:
    * args3:
#. Which clarity of diamonds has the largest average "table" per carat?
    * verb1: 
    * verb2:
    * args1:
    * args2:
    * args3:
#. What color of diamonds occurs the most frequently among diamonds with ideal cuts? 
    * verb1: 
    * verb2:
    * args1:
    * args2:
    * args3:
#. What is the average price per carat of diamonds that cost more than $10000?
    * verb1: 
    * verb2:
    * args1:
    * args2:
    * args3:
#. Create a new data set that groups diamonds by color and displays the average depth and average table for each group. 
    * verb1: 
    * verb2:
    * args1:
    * args2:
    * args3:
    



## Tables

Here is a small data table based on `BabyNames`.  Take this table as the input.  

```{r echo=FALSE,results='asis'}
set.seed( 101 )
Small <- sample_n( BabyNames, size=10 )
row.names( Small ) <- NULL
Small %>% xtable
```


For each of the following outputs, identify the operation and write down the details of the operation.

* Output Table 1

```{r echo=FALSE,results='asis'}
arrange( Small, sex, count ) %>% xtable
```

* Output Table 2

```{r echo=FALSE,results='asis'}
filter( Small, sex=="F" ) %>% xtable
```

* Output Table 3

```{r echo=FALSE,results='asis'}
filter( Small, sex=="M", count > 10 ) %>% xtable
```

* Output Table 4

```{r echo=FALSE,results='asis'}
summarize( Small, total=sum(count) ) %>% xtable
```

* Output Table 5

```{r echo=FALSE,results='asis'}
select( Small, name, count ) %>% xtable
```







### Changing Cases

There's only one data verb that takes a single data table as input and produce an output that (in general) has a different meaning to the case.  Which one?

<aside class="answer">
`summarise()`
</aside>

There's only one data verb that takes two data tables as input rather than just a single data table.  Which one?

<aside class="answer">
`join()`
</aside>


