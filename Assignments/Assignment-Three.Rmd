---
title: "Assignment for Week Three"
author: "Data and Computing Fundamentals"
date: "Macalester College"
output:
  html_document:
    css: ~/KaplanFiles/DCF-2014/CSS/DCF-style.css
    fig_caption: yes
    toc: yes
---

```{r child="/Users/kaplan/KaplanFiles/DCF-2014/CSS/DCF-common.Rmd"}
```


### More on Voting

In the ranked-choice ballot system, once a voter has picked a first choice candidate, there is no advantage in listing that same candidate as second or third choice.  

In answering each of the following, you should include three things:

1. A statement in English (using data verbs!) of your strategy for carry out the calculation.
2. The implementation of the calculation in R.
3. The data table that is the result of the calculation.  This will be printed automatically from (2).  You **do not** have to format the result beautifully.  It's sufficient to show the first few lines in the data table appear.  (Remember `head()`).

* How many people chose the same candidate for both `First` and `Second` place?
* Of the ballots where the `First` and `Second` place choices are the same, what were the top 3 choices?
* Of the people who selected Ole Savior for `First`, what were the top three `Second` choices?


### Medicare Reimbursement

One way to measure the "spread" of values is with the "standard deviation."  The higher the standard deviation, the more spread out the values are.

In the `MedicareCharges` data table:

* Taking all the hospitals together, which DRG has the highest standard deviation in Medicare charges.
* Taking all the DRGs together, which hospital has the highest standard deviation in Medicare charges.
* Medicare typically pays the hospital less than was charged by the hospital.  Calculate the proportion of the charge that was paid (hint: a simple ratio), then find, 
    * across all hospitals, which DRG has the
        * lowest proportion
        * highest proportion
    * across all DRGs, which hospital has the 
        * lowest proportion
        * highest proportion
        
* Make a scatterplot map of the locations of the Medicare providers. (Hint: the ZIP code provides this information, if you can translate it into latitude and longitude.)  Overlay this on a choropleth map giving the population of each state.

* Suppose you wanted to display how many people were treated for problems in various body systems: Heart, Respiratory, Skeletal, BrainCNS, Blood, Circulation, Psychology, Sepsis, Kidney, Endocrine, Digestive, Other.  To help, a translation table is available.  You can access it with commands these commands (which create a data table named `DRGtoBodySystem`): 
```{r eval=FALSE}
library( mosaic )
DRGtoBodySystem <-
  fetchGoogle( "https://docs.google.com/spreadsheet/pub?key=0Am13enSalO74dFFFaGJWdk1IbUo4bVFXLXYzbE1KLXc&single=true&gid=0&output=csv" )
```
    
Make a bar chart showing how much is paid by Medicare for each categories. Your report should show both the bar chart and the commands that generate it.
        
### Zip Codes

Join the zip code geography and demography:

* Make a bar chart showing, for each state, the count of the population that is under 5 years old, between 5 and 18 years old, between 18 and 65 years old, and over 65.
* Make another bar chart showing the *proportion* of the state's population that is in each of the age categories. 
* Call a ZIP code "crowded" when the population is over 50,000.  Make a scatter plot showing the geographic location of the crowded zips. 
* Make a choropleth map of the US showing, for each state, one of the following (your choice).  Hint: you'll have to sum over all the ZIP codes in a state before you can meaningfully find the fraction.

* the fraction of housing units (`Totalhousingunits`) that are vacant (`Vacanthousingunits`).  
* the fraction of the population that is over 65 years old.
* the fraction of the population with a bachelor's degree (`Bachelorsdegreeorhigher`).


Pick out the 10000 zip codes with the highest population.  Make a scatter plot of the latitude versus longitude.  (Hint: `arrange()` and `head()`.)  Use color to represent the fraction of the population that is over 65.

How many zip codes have a `WaterArea` that is more than 50% of the `LandArea`?  Make a scatter plot showing the geographical location of these, with color indicating the population.


